# GO-AIBOB (GBOB Services) - Guest Blogging & Backlink Marketplace

**Generated by Copilot per prompt: GO-AIBOB (GBOB) ‚Äî GentleOmegaAI**

> üöÄ **Production-ready autonomous scraping + AI enrichment pipeline for backlink marketplace**

---

## üìã Table of Contents

- [Overview](#overview)
- [Features](#features)
- [Architecture](#architecture)
- [Prerequisites](#prerequisites)
- [Installation](#installation)
- [Configuration](#configuration)
- [Database Setup](#database-setup)
- [Running the System](#running-the-system)
- [API Documentation](#api-documentation)
- [Deployment](#deployment)
- [Testing](#testing)
- [Monitoring](#monitoring)
- [Troubleshooting](#troubleshooting)

---

## üéØ Overview

GO-AIBOB is an intelligent guest blogging and backlink marketplace platform that:

1. **Scrapes websites** using Puppeteer (headless Chrome)
2. **Extracts metadata** (emails, links, content)
3. **Scores sites** using heuristic algorithms (spam score + backlink value)
4. **Enriches with AI** using 4 HuggingFace models (language, category, summary, sentiment)
5. **Provides APIs** for searching, filtering, and purchasing backlink placements
6. **Admin dashboard** (React) for managing inventory

---

## ‚ú® Features

### Backend
- ‚úÖ **Autonomous scraping worker** with Puppeteer + Bull queue
- ‚úÖ **Multi-model AI enrichment** (HuggingFace Inference API)
- ‚úÖ **Smart scoring** (spam detection + backlink value estimation)
- ‚úÖ **RESTful API** with rate limiting and authentication
- ‚úÖ **PostgreSQL database** with optimized indexes
- ‚úÖ **Redis queue** for job management
- ‚úÖ **Bulk URL import** via CSV/TXT files
- ‚úÖ **Export functionality** (CSV/JSON)

### AI Intelligence
- ü§ñ **Language Detection**: papluca/xlm-roberta-base-language-detection
- üè∑Ô∏è **Category Classification**: facebook/bart-large-mnli (zero-shot)
- üìù **Summarization**: facebook/bart-large-cnn
- üí≠ **Sentiment Analysis**: cardiffnlp/twitter-roberta-base-sentiment-latest
- üîç **Guest Post Detection**: Pattern matching + confidence scoring

### Frontend (Coming)
- üìä Dashboard with filters and pagination
- üîç Site detail view with contact info
- üì§ Bulk URL import interface
- üí∞ Backlink purchase form

---

## üèóÔ∏è Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Frontend (React/Vite)                    ‚îÇ
‚îÇ                    Route: /go-aibob                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ HTTP
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Express API Server                          ‚îÇ
‚îÇ                  Port: 3001 (default)                        ‚îÇ
‚îÇ         Routes: /api/gob/{enqueue,list,export,...}          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                                           ‚îÇ
        ‚îÇ                                           ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Postgres‚îÇ                              ‚îÇ  Redis Queue ‚îÇ
    ‚îÇ   DB    ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ    (Bull)    ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ                     ‚îÇ
                               ‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                               ‚îÇ              ‚îÇ Scrape Worker ‚îÇ
                               ‚îÇ              ‚îÇ  (Puppeteer)  ‚îÇ
                               ‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ                      ‚îÇ
                         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                         ‚îÇ   HuggingFace Enrichment Worker   ‚îÇ
                         ‚îÇ   (4 AI Models + Scoring Logic)   ‚îÇ
                         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üì¶ Prerequisites

### Required
- **Node.js** >= 18.0.0
- **PostgreSQL** >= 14 (cloud: Supabase/Neon/Railway)
- **Redis** (cloud: Upstash or Railway)
- **HuggingFace API Key** (free tier: https://huggingface.co/settings/tokens)

### Optional
- Docker (for local Redis/Postgres)
- PM2 (for production process management)

---

## üöÄ Installation

### 1. Clone & Install Dependencies

```bash
cd d:\Pro\GentleOmegaAI\GentleOmegaAI
npm install
```

### 2. Install Additional Backend Dependencies

```bash
npm install axios bull cors dotenv express express-rate-limit ioredis p-limit pg pino pino-pretty puppeteer
```

### 3. Install Dev Dependencies

```bash
npm install --save-dev jest @jest/globals jest-environment-jsdom
```

---

## ‚öôÔ∏è Configuration

### 1. Copy Environment Template

```bash
cp .env.example .env.local
```

### 2. Configure `.env.local`

**Required Variables:**

```bash
# PostgreSQL (Cloud - Supabase/Neon/Railway)
POSTGRES_URL=postgresql://user:password@host:5432/database

# Redis (Upstash or Railway)
REDIS_URL=redis://default:password@host:port

# HuggingFace (Get from https://huggingface.co/settings/tokens)
HuggingFace_API_Key=hf_your_key_here

# Worker Configuration
MAX_CONCURRENCY=3
PUPPETEER_HEADLESS=true
GOB_QUEUE_NAME=gob-queue
PAGE_TIMEOUT=60000

# API Configuration
PORT=3001
FRONTEND_URL=http://localhost:5173
NODE_ENV=development
```

**Optional for Production:**

```bash
# Rate Limiting
API_RATE_LIMIT_WINDOW_MS=900000
API_RATE_LIMIT_MAX_REQUESTS=100
HF_REQUESTS_PER_MINUTE=10

# Admin Authentication
ADMIN_EMAILS=admin@gentleomegaai.space,aamir.shehzad99@gmail.com

# S3 Storage (for HTML snapshots)
S3_ENDPOINT=https://your-endpoint.com
S3_ACCESS_KEY=your_key
S3_SECRET_KEY=your_secret
S3_BUCKET=gob-snapshots

# Stripe (Payment integration - stub for now)
STRIPE_SECRET_KEY=sk_test_your_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_key
```

---

## üóÑÔ∏è Database Setup

### Option A: Cloud Postgres (Recommended for Production)

1. **Create database** on Supabase/Neon/Railway
2. **Get connection string**: `postgresql://user:pass@host:port/db`
3. **Add to `.env.local`** as `POSTGRES_URL`

### Option B: Local Postgres

```bash
# Windows (assuming PostgreSQL 18 installed)
psql -U postgres
CREATE DATABASE gentleomega_gob;
\q
```

### Run Migration

```bash
npm run gob:migrate
```

**Expected output:**
```
üîÑ Running database migration...
‚úÖ Connected
‚ö° Executing migration...
‚úÖ Migration completed successfully!
‚úÖ Created 4 tables:
   - gob_enrichment_queue
   - gob_orders
   - gob_scraping_stats
   - gob_sites
```

---

## üé¨ Running the System

### Development Mode

**Terminal 1: API Server**
```bash
npm run gob:api
```

**Terminal 2: Scraping Worker**
```bash
npm run gob:worker
```

**Terminal 3: Frontend (optional)**
```bash
npm run dev
```

### Check Health

```bash
curl http://localhost:3001/health
```

**Expected response:**
```json
{
  "status": "ok",
  "service": "GO-AIBOB API",
  "timestamp": "2025-11-21T..."
}
```

---

## üìö API Documentation

### Base URL
```
http://localhost:3001/api/gob
```

### Endpoints

#### 1. **Enqueue URLs for Scraping**

```bash
POST /api/gob/enqueue
Content-Type: application/json

{
  "urls": [
    "https://example.com",
    "https://another-site.com"
  ]
}
```

**Response:**
```json
{
  "success": true,
  "queued": 2,
  "jobIds": ["1", "2"]
}
```

#### 2. **List Scraped Sites**

```bash
GET /api/gob/list?page=1&limit=20&hasEmail=true&minBacklinkValue=50&maxSpamScore=30
```

**Query Parameters:**
- `page` (default: 1)
- `limit` (default: 20, max: 100)
- `status` (new|scraped|enriched|error)
- `category` (SaaS|Health|Finance|Marketing|etc.)
- `hasEmail` (true|false)
- `minBacklinkValue` (number)
- `maxSpamScore` (0-100)
- `guestPostOnly` (true|false)

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "url": "https://example.com",
      "title": "Example Site",
      "category": "Technology",
      "email_count": 2,
      "links_count": 150,
      "spam_score": 15,
      "backlink_value": 75.50,
      "guest_post_detected": true
    }
  ],
  "total": 42,
  "page": 1,
  "totalPages": 3
}
```

#### 3. **Get Site Details**

```bash
GET /api/gob/:id
```

#### 4. **Re-scrape a Site**

```bash
POST /api/gob/requeue/:id
```

#### 5. **Purchase Backlink**

```bash
POST /api/gob/buy-backlink
Content-Type: application/json

{
  "site_id": 1,
  "buyer_name": "John Doe",
  "buyer_email": "john@example.com",
  "target_url": "https://mybusiness.com",
  "keywords": ["AI", "technology", "innovation"]
}
```

**Response:**
```json
{
  "success": true,
  "order": {
    "id": 1,
    "invoice_id": "INV-20251121-12345",
    "site_url": "https://example.com",
    "price_estimate": 125.50,
    "currency": "USD",
    "status": "pending"
  }
}
```

#### 6. **Export Sites**

```bash
GET /api/gob/export?format=csv&hasEmail=true
```

Formats: `csv` or `json`

#### 7. **System Stats**

```bash
GET /api/gob/stats
```

**Response:**
```json
{
  "success": true,
  "overview": {
    "total_sites": 1247,
    "scraped": 1189,
    "enriched": 1050,
    "errors": 58,
    "guest_post_sites": 234,
    "sites_with_emails": 890,
    "avg_spam_score": 27.45,
    "avg_backlink_value": 62.30
  },
  "categories": [
    {"category": "Technology", "count": 345},
    {"category": "Finance", "count": 198}
  ]
}
```

---

## üö¢ Deployment

### Railway (Recommended)

#### 1. **Deploy Database**
- Create PostgreSQL service
- Copy connection string

#### 2. **Deploy Redis**
- Create Redis service
- Copy connection string

#### 3. **Deploy API Server**

```bash
# In Railway dashboard
Service: gob-api
Build Command: npm install
Start Command: npm run gob:api
Environment Variables:
  - POSTGRES_URL
  - REDIS_URL
  - HuggingFace_API_Key
  - PORT (Railway auto-assigns)
```

#### 4. **Deploy Worker**

```bash
Service: gob-worker
Build Command: npm install
Start Command: npm run gob:worker
Environment Variables:
  - POSTGRES_URL
  - REDIS_URL
  - HuggingFace_API_Key
  - MAX_CONCURRENCY=3
```

### PM2 (VPS/Dedicated Server)

```bash
# Install PM2
npm install -g pm2

# Create ecosystem file
pm2 init
```

**ecosystem.config.js:**
```javascript
module.exports = {
  apps: [
    {
      name: 'gob-api',
      script: 'src/gob/api/server.js',
      instances: 2,
      exec_mode: 'cluster',
      env: {
        NODE_ENV: 'production',
        PORT: 3001
      }
    },
    {
      name: 'gob-worker',
      script: 'src/gob/worker/worker.js',
      instances: 1,
      env: {
        NODE_ENV: 'production'
      }
    }
  ]
};
```

```bash
# Start services
pm2 start ecosystem.config.js
pm2 save
pm2 startup
```

---

## üß™ Testing

### Run Unit Tests

```bash
npm test
```

### Test pageFunction Extraction

```bash
npm test tests/gob/pageFunction.test.js
```

### Manual API Testing

```bash
# Import test URLs
echo "https://techcrunch.com" > test_urls.txt
echo "https://mashable.com" >> test_urls.txt
npm run gob:import test_urls.txt

# Check status
curl http://localhost:3001/api/gob/list

# View details
curl http://localhost:3001/api/gob/1
```

---

## üìä Monitoring

### Queue Dashboard

```bash
npm install -g bull-board
bull-board
```

Visit: http://localhost:3000

### Logs

```bash
# API logs
pm2 logs gob-api

# Worker logs
pm2 logs gob-worker
```

### Database Stats

```sql
-- Site statistics
SELECT 
  status, 
  category, 
  COUNT(*) as count 
FROM gob_sites 
GROUP BY status, category;

-- Average metrics
SELECT 
  AVG(spam_score) as avg_spam,
  AVG(backlink_value) as avg_value,
  COUNT(*) FILTER (WHERE guest_post_detected = true) as guest_post_count
FROM gob_sites 
WHERE status = 'enriched';
```

---

## üêõ Troubleshooting

### Issue: Worker not processing jobs

```bash
# Check Redis connection
redis-cli ping

# Check queue status
curl http://localhost:3001/api/gob/health

# Clear stuck jobs
redis-cli
> DEL bull:gob-queue:*
```

### Issue: Puppeteer fails to launch

```bash
# Install Chrome dependencies (Linux)
sudo apt-get install -y \
  gconf-service libasound2 libatk1.0-0 libcups2 \
  libdbus-1-3 libgdk-pixbuf2.0-0 libgtk-3-0 libnspr4 \
  libnss3 libx11-xcb1 libxcomposite1 libxdamage1 \
  libxrandr2 libgbm1 libxss1 libxtst6 fonts-liberation \
  libappindicator1 xdg-utils
```

### Issue: HuggingFace rate limits

```bash
# Add more API keys to .env.local
HuggingFace_API_Key=hf_key1
HF_API_KEY_2=hf_key2
HF_API_KEY_3=hf_key3
```

### Issue: Database connection timeout

```bash
# Increase connection pool size
# In postgres.js, change:
max: 20  ‚Üí  max: 50
```

---

## üìñ Additional Resources

- [Puppeteer Documentation](https://pptr.dev/)
- [Bull Queue Guide](https://github.com/OptimalBits/bull)
- [HuggingFace Inference API](https://huggingface.co/docs/api-inference/index)
- [PostgreSQL Indexes](https://www.postgresql.org/docs/current/indexes.html)

---

## ü§ù Support

For issues or questions:
- Email: aamir.shehzad99@gmail.com
- GitHub Issues: [GentleOmegaAI/issues](https://github.com/aamirshehzad9/GentleOmegaAI/issues)

---

## üìÑ License

MIT License - See LICENSE file for details

---

**Built with ‚ù§Ô∏è by GentleŒ©mega AI Team**
